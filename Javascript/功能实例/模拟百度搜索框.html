<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        * {
            padding: 0;
            margin: 0;
            list-style: none;
        }

        body {
            height: 5000px;
        }

        .box {
            width: 600px;
            margin: 200px auto;
        }

        input {
            width: 500px;
            height: 30px;
            outline-style: none;
            padding: 0;
            margin: 0;
            padding-left: 10px;
            font: 20px "simsun";
            border: 1px solid #ccc;
        }

        button {
            width: 80px;
            height: 32px;
            font-size: 20px;
        }

        ul {
            width: 490px;
            padding: 10px;
            border: 1px solid red;
            border-top: 0;
        }

        li {
            font: 500 20px/28px "simsun";
            cursor: pointer;
        }

        li:hover {
            background: red;
        }
    </style>

    <script>
        window.onload = function () {
            //模拟从数据库查询到的内容.
            var arr = ["a", "aa", "aaa", "ab", "abc", "abcd", "abcde", "abcdef", "abcdefg", "bb", "bbb", "bc"];
            //需求:  在input里面输入内容,
            //       判断input里的内容和arr数组中的元素开头的内容一致的
            //       添加到一个新的li中,然后添加到ul中,然后添加到div中.

            //步骤:
            //1.老三步;(引入两个新技术:1.onkeyup;键盘弹起事件;   2.indexOf();查找字符串中另一个字符的索引值)
            //2.判断input里面的内容,数组arr中的元素哪个是以他为开头的,添加到一个新数组中.
            //3.利用新数组,创建li标签,添加到ul中,ul添加到div中.

            //1.老三步
            var box = document.getElementById("box");
            var inp = box.children[0];

            inp.onkeyup = function () {
                var newArr = [];
                for (var i = 0; i < arr.length; i++) {
                    //2.判断input里面的内容,数组arr中的元素哪个是以他为开头的,添加到一个新数组中.
                    //判断:老数组中的元素必须以input的value值为开头
                    if (arr[i].indexOf(this.value) == 0) {
                        newArr.push(arr[i]);
                    }
                }
                //判断box子元素的个数,保证ul的数量在生成后始终未1
                if (box.children.length == 3) {

                    //如果存在ul,box的子元素就有3个,就得先删除ul,再进行创建
                    box.removeChild(box.children[2]);
                }
                //位置不能和上面的调换
                //判断1:当没有找到搜索结果时不生成ul,也就是新数组newArr里面没有内容,长度为''时
                //判断2:当input搜索框中没有内容或是空字符串时,不生成ul

                if (newArr.length == "" || this.value == "") {
                    return;//切断函数,在其上面已经删除了ul,在往下走不许生成ul,
                }

                //3.利用新数组,创建li标签,添加到ul中,ul添加到div中.
                var ul = document.createElement("ul");
                //bug1:ul列表的个数始终只显示1个
                for (var j = 0; j < newArr.length; j++) {
                    var newLi = document.createElement("li");

                    newLi.innerHTML = newArr[j];
                    ul.appendChild(newLi);
                }
                box.appendChild(ul);
            }
        }
    </script>
</head>
<body>

<div class="box" id="box">
    <input type="text"/>
    <button>搜索</button>
    <!--<ul>-->
    <!--<li>你好</li>-->
    <!--<li>我好</li>-->
    <!--<li>大家好</li>-->
    <!--</ul>-->
</div>


</body>
</html>