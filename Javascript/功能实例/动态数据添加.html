<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>动态数据添加</title>
        <style>
            * {
                padding: 0;
                margin: 0;
            }

            .wrap {
                width: 410px;
                margin: 100px auto 0;
            }

            table {
                border-collapse: collapse;
                border-spacing: 0;
                border: 1px solid #c0c0c0;
            }

            th,
            td {
                border: 1px solid #d0d0d0;
                color: #404060;
                padding: 10px;
            }

            th {
                background-color: #09c;
                font: bold 16px "微软雅黑";
                color: #fff;
            }

            td {
                font: 14px "微软雅黑";
            }

            td a.get {
                text-decoration: none;
            }

            a.del:hover {
                text-decoration: underline;
            }

            tbody tr {
                background-color: #f0f0f0;
            }

            tbody tr:hover {
                cursor: pointer;
                background-color: #fafafa;
            }

            .btnAdd {
                width: 110px;
                height: 30px;
                font-size: 20px;
                font-weight: bold;
            }

            .form-item {
                height: 100%;
                position: relative;
                padding-left: 100px;
                padding-right: 20px;
                margin-bottom: 34px;
                line-height: 36px;
            }

            .form-item > .lb {
                position: absolute;
                left: 0;
                top: 0;
                display: block;
                width: 100px;
                text-align: right;
            }

            .form-item > .txt {
                width: 300px;
                height: 32px;
            }

            .mask {
                position: absolute;
                top: 0px;
                left: 0px;
                width: 100%;
                height: 100%;
                background: #000;
                opacity: 0.5;
                display: none;
            }

            .form-add {
                position: fixed;
                top: 30%;
                left: 50%;
                margin-left: -197px;
                padding-bottom: 20px;
                background: #fff;
                display: none;
            }

            .form-add-title {
                background-color: #f7f7f7;
                border-width: 1px 1px 0 1px;
                border-bottom: 0;
                margin-bottom: 15px;
                position: relative;
            }

            .form-add-title span {
                width: auto;
                height: 18px;
                font-size: 16px;
                font-family: 宋体;
                font-weight: bold;
                color: rgb(102, 102, 102);
                text-indent: 12px;
                padding: 8px 0px 10px;
                margin-right: 10px;
                display: block;
                overflow: hidden;
                text-align: left;
            }

            .form-add-title div {
                width: 16px;
                height: 20px;
                position: absolute;
                right: 10px;
                top: 6px;
                font-size: 30px;
                line-height: 16px;
                cursor: pointer;
            }

            .form-submit {
                text-align: center;
            }

            .form-submit input {
                width: 170px;
                height: 32px;
            }

        </style>

    <script>
        window.onload = function () {
            //需求1: 点击按钮显示遮罩层和添加区域;
            //需求2: 点击按钮隐藏遮罩层和添加区域;
            //需求3: 点击添加按钮,生成一个tr,添加到tbody中;
            //需求4: 点击get所在的a链接,删除所在的tr;
            var show = document.getElementById("j_btnAddData");
            var mask = document.getElementById("j_mask");
            var txt = document.getElementById("j_formAdd");
            var hide = document.getElementById("j_hideFormAdd");

            //需求1: 点击按钮显示遮罩层和添加区域;
            show.onclick = function () {
                mask.style.display = "block";
                txt.style.display = "block";
            }

            //需求2: 点击按钮隐藏遮罩层和添加区域;
            hide.onclick = close;


            //需求3: 点击添加按钮,生成一个tr,添加到tbody中;
            var add = document.getElementById("j_btnAdd");
            var tbody = document.getElementById("j_tb");//全局,后面都可以访问

            add.onclick = function () {
                var newTr = document.createElement("tr");
                var lesson = document.getElementById("j_txtLesson");
                var school = document.getElementById("j_txtBelSch");

                //bug3:设置为空的内容不能添加
                if (lesson.value == "" || school.value == "") {
                    alert("请课程名称及所属院校,不能为空");
                    return;
                }
                newTr.innerHTML = '<td>' + lesson.value + '</td>' +
                        '<td>' + school.value + '</td>' +
                        '<td>< a href="javascrip:;" class="get" >GET</a></td>';

                console.log(newTr);
                tbody.appendChild(newTr);

                //bug1:点击只有,遮罩层和添加区域;
                //第一种:
                close();

                //第二种:(就是执行hide对象里面的onclick方法)
//               hide.onclick();

                //bug2:清空课程内容,把院校默认设置为传智播客...
                lesson.value = '';
                school.value = '传智播客-前端与移动开发学院';

                //bug4:新添加的a链接没有删除事件;
                newTr.getElementsByTagName("a")[0].onclick = function () {
                    tbody.removeChild(this.parentNode.parentNode);
                }
            }
            //全局,方便函数内外调用
            function close() {
                mask.style.display = "none";
                txt.style.display = "none";
            }

            //需求4: 点击get所在的a链接,删除所在的tr;(只能删除原有tr)
            var get = tbody.getElementsByClassName("get");
            for (var i = 0; i < get.length; i++) {
                get[i].onclick = function () {
                    tbody.removeChild(this.parentNode.parentNode);
                }
            }

           console.log(tbody.innerText);
        }
    </script>
</head>
<body>

<div class="wrap">
    <!--添加按钮-->
    <div>
        <input type="button" value="添加数据" id="j_btnAddData" class="btnAdd"/>
    </div>
    <!--表格-->
    <table>
        <thead>
        <tr>
            <!-- <th><input type="checkbox" id="j_cbAll" /></th> -->
            <th>课程名称</th>
            <th>熟练程度</th>
            <th>已学会</th>
        </tr>
        </thead>
        <tbody id="j_tb">
        <tr>
            <!-- <td><input type="checkbox"/></td> -->
            <td>JavaScript</td>
            <td>1级</td>
            <td><a href="javascrip:;" class="get">GET</a></td>
        </tr>
        <tr>
            <!-- <td><input type="checkbox"/></td> -->
            <td>css</td>
            <td>2级</td>
            <td><a href="javascript:;" class="get">GET</a></td>
        </tr>
        <tr>
            <!-- <td><input type="checkbox"/></td> -->
            <td>html</td>
            <td>5级</td>
            <td><a href="javascript:;" class="get">GET</a></td>
        </tr>
        <tr>
            <!-- <td><input type="checkbox"/></td> -->
            <td>jQuery</td>
            <td>熟练</td>
            <td><a href="javascript:;" class="get">GET</a></td>
        </tr>
        </tbody>
    </table>
</div>

<!--遮罩层-->
<div id="j_mask" class="mask"></div>
<!--添加区域-->
<div id="j_formAdd" class="form-add">
    <div class="form-add-title">
        <span>添加数据</span>

        <div id="j_hideFormAdd">x</div>
    </div>
    <div class="form-item">
        <label class="lb" for="j_txtLesson">课程名称：</label>
        <input class="txt" type="text" id="j_txtLesson" placeholder="请输入课程名称">
    </div>
    <div class="form-item">
        <label class="lb" for="j_txtBelSch">所属学院：</label>
        <input class="txt" type="text" id="j_txtBelSch" value="语文">
    </div>
    <div class="form-submit">
        <input type="button" value="添加" id="j_btnAdd">
    </div>
</div>

</body>
</html>
