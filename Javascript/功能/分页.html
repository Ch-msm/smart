<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    #page {
      text-align: center;
    }

    .page {
      display: inline-block;
    }

    .page a {
      padding: 3px 8px;
      border: 1px solid #d2d2d2;
      text-decoration: none;
      margin: 0 2px;
      color: #444;
    }

    .page a.invisible {
      visibility: hidden;
    }

    .page a.on {
      color: #fff;
      border-color: #d36969;
      background: #d36969;
    }
  </style>
</head>

<body>
  <div id="content">

  </div>
  <script src="https://cdn.bootcss.com/jquery/1.8.0/jquery-1.8.0.js"></script>
  <script src="./dataobj.js">
  </script>
  <script>
    // 内容总数量为：totalCount
    // 每页加载数量为：loadCount
    // totalPage = (totalCount + loadCount - 1) / loadCount;
    // 其中 loadCount- 1 就是 totalCount/ loadCount的最大的余数


    //https://www.cnblogs.com/LY-leo/p/5808196.html

    var totalCount = dataObj.length;


    var page_num = (totalCount + 2 - 1) / 2;
    var page_index = 1;
    setPages(page_num);

    function setPages(num) {　　
      $('#page').remove();
      if (num > 1) {
        $('body').append('<div id="page"><div class="page"></div></div>');
        var page_text = '<a class="prev btn" href="javascript:void(0)">上一页</a>' + 　　　　　　　　　　　　　　
          '<a class="on" href="javascript:void(0)">1</a>';
        for (var i = 2; i <= num; i++) {
          page_text += '<a href="javascript:void(0)">' + i + '</a>';
        }
        page_text += '<a class="next btn" href="javascript:void(0)">下一页</a>';
        $('#page .page').html(page_text);
        canShow();
      }
    }

    function canShow() {
      for (var i = 1; i < $('#page .page a').length - 1; i++) {
        if ($('#page .page a').eq(i).hasClass('on')) {
          $('#page .page a').removeClass('invisible');
          if (i == 1) {
            $('#page .page .prev').addClass('invisible');
          } else if (i == page_num) {
            $('#page .page .next').addClass('invisible');
          }
        }
      }
    }

    $('#page .page a').on('click', function () {
      if ($(this).hasClass('on')) return;
      $('#page .page a').removeClass('on')
      if ($(this).hasClass('prev')) {
        page_index--;
        $('#page .page a').eq(page_index).addClass('on');
      } else if ($(this).hasClass('next')) {
        page_index++;
        $('#page .page a').eq(page_index).addClass('on');
      } else {
        page_index = $(this).index();
        $(this).addClass('on');
      }
      getData();
      canShow();
    });



    // var data = { page_index: page_index, ...};
    function getData() {
      alert(page_index);

    }

    function showText(data) {
      var content = '';
      for (obj in data) {

      }
      $('#test').empty().html(content);
    }
  </script>
</body>

</html>